!function(){window.F=window.F||{},F.doublePI=2*Math.PI,F._readImageRGBData=function(a,n,t,r){var o=new Image,e={},i=function(){return!0};r&&(i=r),o.onload=function(){var a=o.width,r=o.height;n.drawImage(o,0,0),e.w=a,e.h=r,e.points=[];var z=n.getImageData(0,0,a,r),c=0,h=0,u=(z.data.length,0),s={};for(c=0;c<a;c++)for(h=0;h<r;h++)u=4*(h*a+c),console.log(u+"的：R-"+z.data[u]+" G-"+z.data[u+1]+" B-"+z.data[u+2]+" A-"+z.data[u+3]),s={x:c,y:h,r:z.data[u],g:z.data[u+1],b:z.data[u+2],a:z.data[u+3]},i(s)&&e.points.push(s);t(e)},o.src=a},F._readImageHSLData=function(a,n,t,r){var o=new Image,e={},i=function(){return!0};r&&(i=r),o.onload=function(){var a=o.width,r=o.height;n.drawImage(o,0,0),e.w=a,e.h=r,e.points=[];var z=n.getImageData(0,0,a,r),c=0,h=0,u=(z.data.length,0),s={};for(c=0;c<a;c++)for(h=0;h<r;h++){u=4*(h*a+c);var f=F._rgbToHslObj(z.data[u],z.data[u+1],z.data[u+2]);s={x:c,y:h,h:f.h,s:f.s,l:f.l,a:z.data[u+3]},i(s)&&e.points.push(s)}t(e)},o.src=a},F._getImageHSLData=function(a,n,t,r){var o=function(){return!0};r&&(o=r);var e={};e.w=n,e.h=t,e.points=[];var i=0,z=0,c=(a.data.length,0),h={};for(i=0;i<n;i++)for(z=0;z<t;z++){c=4*(z*n+i);var u=F._rgbToHslObj(a.data[c],a.data[c+1],a.data[c+2]);h={x:i,y:z,h:u.h,s:u.s,l:u.l,a:a.data[c+3]},o(h)&&e.points.push(h)}return e},F._rgbToHslObj=function(a,n,t){a/=255,n/=255,t/=255;var r=Math.max(a,n,t),o=Math.min(a,n,t),e=r-o,i=r+o,z={h:0,s:0,l:0};return r==o?z.h=0:r==a&&n>=t?z.h=60*(n-t)/e:r==a&&n<t?z.h=60*(n-t)/e+360:r==n?z.h=60*(t-a)/e+120:r==t&&(z.h=60*(a-n)/e+240),z.l=i/2,0==z.l||r==o?z.s=0:0<z.l&&z.l<=.5?z.s=e/i:z.s=e/(2-i),z.h=Math.round(z.h),z},F._rotatePoint=function(a,n,t){var r=0,o=0,e=0;return"z"===n||"Z"===n?(r=Math.cos(t)*a.x-Math.sin(t)*a.y,o=Math.sin(t)*a.x+Math.cos(t)*a.y,e=a.z):"y"===n||"Y"===n?(r=Math.cos(t)*a.x-Math.sin(t)*a.z,o=a.y,e=Math.sin(t)*a.x+Math.cos(t)*a.z):"x"!==n&&"X"!==n||(r=a.zX,o=Math.sin(t)*a.z+Math.cos(t)*a.y,e=Math.cos(t)*a.z-Math.sin(t)*a.y),a.x=r,a.y=o,a.z=e,a.zX=Math.round(r),a.zY=Math.round(o),a.zZ=Math.round(e),{x:r,y:o,z:e}},F._changeFocalPoint=function(a){var n,t,r;return n=a.zX,t=-1*a.zZ,r=-1*a.zY,{x:n,y:t,z:r}},F._createDrawPoint=function(a,n,t,r,o){var e=-1*n;if(a.z<=e)return null;var i=n/(n+a.z),z=(a.x,a.y,t+(a.x-t)*i),c=r+(a.y-r)*i,h={x:z,y:c,z:a.z,scale:i};return o&&o(a,h,i),h},F._changeDrawPointArray=function(a,n,t,r,o){for(var e=[],i=a.length,z=0;z<i;z++){var c=a[z],h=F._createDrawPoint(c,n,t,r,o);e.push(h)}return e.sort(function(a,n){return n.z-a.z}),e},F.changeToDrawPointArray=function(a,n,t,r,o){for(var e=[],i=a.length,z=0;z<i;z++){var c=a[z],h=F._changeFocalPoint(c),u=F._createDrawPoint(h,n,t,r,o);null!==u&&e.push(u)}return e.sort(function(a,n){return n.z-a.z}),e},F.createNewPoints=function(a,n,t,r,o){for(var e=[],i=a.length,z=0;z<i;z++){var c=a[z];c.zX,c.zY,c.zZ;var h=F._transformToScreenCenter(c,t,r);h.zX,h.zY,h.zZ;var u=F._transformToFocalPosition(h),s=(u.zX,u.zY,u.zZ,F._transformToDrawPoint(u,n,t,r));o&&o(s,s.scale),!0!==s.oV&&e.push(s)}return e.sort(function(a,n){return n.zZ-a.zZ}),e},F._createHSLA=function(a){var n=100*a.s,t=100*a.l;return"hsla("+[a.h,n+"%",t+"%",a.a].join(",")+")"},F._createHSLAByLight=function(a){var n=100*a.s,t=100*a.light;return"hsla("+[a.h,n+"%",t+"%",a.opacity].join(",")+")"},F._changeCylinderPoint=function(a,n,t,r){var o=a.x-t,e=o/n;a.zX=n*Math.sin(e)+r.x,a.zY=n*Math.cos(e),a.zZ=a.z},F._changeCylinderPointV2=function(a,n,t){var r=a.zX-t.x,o=r/n;a.zX=n*Math.sin(o)+t.x,a.zY=n-n*Math.cos(o)},F._changeToScreenCenter=function(a,n,t){return a.zX=n+a.zX,a.zY=a.zY,a.zZ=-1*(t+a.zZ),a},F._transformToScreenCenter=function(a,n,t){var r={};return r.zX=n+a.zX,r.zY=a.zY,r.zZ=-1*(t+a.zZ),r},F._changeToFocalPosition=function(a){var n=-1*a.zZ,t=-1*a.zY;return a.zY=n,a.zZ=t,a},F._transformToFocalPosition=function(a){var n={},t=-1*a.zZ,r=-1*a.zY;return n.zX=a.zX,n.zY=t,n.zZ=r,n},F._changeToDrawPoint=function(a,n,t,r){var o=-1*n;if(a.zZ<o)a.oV=!0;else{a.oV=!1;var e=n/(n+a.zZ),i=(a.zX-t)*e,z=(a.zY-r)*e,c=t+i,h=r+z;a.dx=Math.round(c),a.dy=Math.round(h),a.scale=e}return a},F._transformToDrawPoint=function(a,n,t,r){var o=-1*n,e={};if(a.zZ<o)e.oV=!0;else{e.oV=!1;var i=n/(n+a.zZ),z=(a.zX-t)*i,c=(a.zY-r)*i,h=t+z,u=r+c;e.dx=Math.round(h),e.dy=Math.round(u),e.scale=i,e.zZ=a.zZ}return e},F._changeToScale=function(a,n,t,r){var o=n||1,e=t||1,i=r||1;return a.zX=a.zX*o,a.zY=a.zY*e,a.zZ=a.zZ*i,a},F._transformToScale=function(a,n,t,r){var o=n||1,e=t||1,i=r||1;return p1={},p1.zX=a.zX*o,p1.zY=a.zY*e,p1.zZ=a.zZ*i,a},F.createNewPointsByChange=function(a,n,t,r,o,e){for(var i=[],z=a.length,c=0;c<z;c++){var h=a[c];F._changeToScale(h,.5,.5,.5),o&&F._changeToScreenCenter(h,t,r),F._changeToFocalPosition(h),F._changeToDrawPoint(h,n,t,r),e&&e(h,h.scale),!0!==h.oV&&i.push(h)}return i.sort(function(a,n){return n.zZ-a.zZ}),i}}();