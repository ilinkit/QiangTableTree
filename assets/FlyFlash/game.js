!function(){window.GM=window.GM||{},GM.createGame=function(n){var t,e={enable_debug:!1};if(t=n?$.extend(!0,{},e,n):e,t.enable_debug){$("body").append('<style type="text/css">.game-debug-box{display:block;position:absolute;top:-60px;left:0;right:0;padding:.5rem;text-align:center;background-color:#a6a6a6}.game-debug-box:hover{top:0}.game-debug-box .debug-btn-list>li{display:inline-block;margin-left:5px;margin-right:5px;height:60px;line-height:60px;width:60px;text-align:center;color:#fbfbfb;background-color:#F08;border-radius:6px;font-weight:bold}.game-debug-box .debug-btn-list>li:hover{background-color:#E0A;cursor:pointer}</style>');var i=$('<div id="game-debug-box" class="game-debug-box"><ul class="debug-btn-list"><li class="play_btn">||</li><li class="step_btn">&gt;|</li><li class="slow_btn">&lt;&lt;</li><li class="fast_btn">&gt;&gt;</li></ul></div>').appendTo($("body")),a=i.find(".play_btn").eq(0),o=i.find(".step_btn").eq(0),s=i.find(".slow_btn").eq(0),l=i.find(".fast_btn").eq(0);a.click(function(){var n=$(this);n.hasClass("pause_status")?(y.resume(),n.removeClass("pause_status"),n.html("||")):(y.pause(),n.addClass("pause_status"),n.html("|&gt;"))}),o.click(function(){y.stepOne()}),s.click(function(){y.slowGame()}),l.click(function(){y.fastGame()})}var u,r,c=[],d=!1,m=0,f=1,b=0,g=0;!function(){for(var n=0,t=["webkit","ms","moz","o"],e=0;e<t.length&&!window.requestAnimationFrame;e++)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),a=Math.max(0,16-(i-n)),o=i+a,s=window.setTimeout(function(){t(o)},a);return n=o,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}();var w=function(){r.clearRect(0,0,b,g);for(var n=c.length,t=0;t<n;t++)c[t].update()},p=function(n){for(var t=c.length,e=0;e<t;e++)n[e].render()},h=p,x=function(){w(),h(c)},v=function(){!1===d?(m++,m%f==0&&(x(),m=0),u=window.requestAnimationFrame(v)):window.cancelAnimationFrame(u)},y={};return y.setElfBox=function(n){c=n},y.addElfObj=function(n){c.push(n)},y.init=function(n,t,e,i){r=n,b=t,g=e,i&&(h=i)},y.reload=function(){},y.start=function(){v()},y.pause=function(){d=!0},y.resume=function(){d=!1,v()},y.stepOne=function(){x()},y.fastGame=function(){(f-=1)<1&&(f=1)},y.slowGame=function(){(f+=1)>20&&(f=20)},y},GM.elfBaseObj=function(){return{x:0,y:0,z:0,width:0,height:0,vx:0,vy:0,vz:0,update:function(){this.x=this.x+this.vx,this.y=this.y+this.vy,this.z=this.z+this.vz},render:function(){}}}()}();